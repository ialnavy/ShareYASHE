<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="473px" preserveAspectRatio="none" style="width:774px;height:473px;background:#FFFFFF;" version="1.1" viewBox="0 0 774 473" width="774px" zoomAndPan="magnify"><defs/><g><!--MD5=[ed98728a148e5e560feef3182efb09df]
cluster persistenceLayer--><g id="cluster_persistenceLayer"><path d="M8.5,6 L131.5,6 A3.75,3.75 0 0 1 134,8.5 L141,29.6094 L619.5,29.6094 A2.5,2.5 0 0 1 622,32.1094 L622,463.5 A2.5,2.5 0 0 1 619.5,466 L8.5,466 A2.5,2.5 0 0 1 6,463.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="141" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122" x="10" y="22.5332">Persistence layer</text></g><!--MD5=[b8c49ce65009a926f05f28dea06ae306]
class persistenceFactory--><g id="elem_persistenceFactory"><rect codeLine="4" fill="#F1F1F1" height="48" id="persistenceFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="22" y="343"/><ellipse cx="37" cy="359" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M39.7656,354.875 Q39.9219,354.6563 40.1094,354.5469 Q40.2969,354.4375 40.5156,354.4375 Q40.8906,354.4375 41.125,354.7031 Q41.3594,354.9531 41.3594,355.5625 L41.3594,357.0156 Q41.3594,357.625 41.125,357.8906 Q40.8906,358.1563 40.5156,358.1563 Q40.1719,358.1563 39.9688,357.9531 Q39.7656,357.7656 39.6563,357.25 Q39.6094,356.8906 39.4219,356.7031 Q39.0938,356.3281 38.4844,356.1094 Q37.875,355.8906 37.25,355.8906 Q36.4844,355.8906 35.8438,356.2188 Q35.2188,356.5469 34.7188,357.2969 Q34.2344,358.0469 34.2344,359.0781 L34.2344,360.1719 Q34.2344,361.4063 35.125,362.2344 Q36.0156,363.0469 37.6094,363.0469 Q38.5469,363.0469 39.2031,362.7969 Q39.5938,362.6406 40.0156,362.2031 Q40.2813,361.9375 40.4219,361.8594 Q40.5781,361.7813 40.7813,361.7813 Q41.1094,361.7813 41.3594,362.0469 Q41.625,362.2969 41.625,362.6406 Q41.625,362.9844 41.2813,363.3906 Q40.7813,363.9688 39.9844,364.2969 Q38.9063,364.75 37.6094,364.75 Q36.0938,364.75 34.8906,364.125 Q33.9063,363.625 33.2188,362.5625 Q32.5313,361.4844 32.5313,360.2031 L32.5313,359.0469 Q32.5313,357.7188 33.1406,356.5781 Q33.7656,355.4219 34.8594,354.8125 Q35.9531,354.1875 37.1875,354.1875 Q37.9219,354.1875 38.5625,354.3594 Q39.2188,354.5156 39.7656,354.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="51" y="364.7285">PersistenceFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="175" y1="375" y2="375"/><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="175" y1="383" y2="383"/></g><!--MD5=[70b409703bcd90b8ac7af63b682cb3da]
class abstractRepository--><g id="elem_abstractRepository"><rect codeLine="6" fill="#F1F1F1" height="206.4844" id="abstractRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="370" x="236" y="42"/><ellipse cx="356.75" cy="58" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M358.9375,59.7656 L354.7969,59.7656 L354.375,60.7969 L354.7969,60.7969 Q355.4063,60.7969 355.6719,61.0313 Q355.9375,61.2656 355.9375,61.6563 Q355.9375,62.0313 355.6719,62.2656 Q355.4063,62.5 354.7969,62.5 L352.5,62.5 Q351.8906,62.5 351.6406,62.2656 Q351.375,62.0313 351.375,61.6406 Q351.375,61.2656 351.6563,61.0313 Q351.9219,60.7813 352.5469,60.7969 L355.2188,54.1406 L354.1094,54.1406 Q353.5,54.1406 353.2344,53.9063 Q352.9688,53.6719 352.9688,53.2813 Q352.9688,52.9063 353.2344,52.6719 Q353.5,52.4375 354.1094,52.4375 L357.7813,52.4375 L361.1719,60.7969 Q361.7656,60.7969 361.9531,60.9375 Q362.3438,61.2031 362.3438,61.6563 Q362.3438,62.0313 362.0781,62.2656 Q361.8281,62.5 361.2188,62.5 L358.9219,62.5 Q358.3125,62.5 358.0469,62.2656 Q357.7813,62.0313 357.7813,61.6406 Q357.7813,61.2656 358.0469,61.0313 Q358.3125,60.7969 358.9219,60.7969 L359.3438,60.7969 L358.9375,59.7656 Z M358.2188,58.0625 L356.8594,54.6875 L355.4844,58.0625 L358.2188,58.0625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="120" x="377.25" y="63.7285">AbstractRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="237" x2="605" y1="74" y2="74"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="244" y="85.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="103" x="256" y="92.5332">clientDB = 'local'</text><line style="stroke:#181818;stroke-width:1.0;" x1="237" x2="605" y1="99.6094" y2="99.6094"/><ellipse cx="247" cy="113.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="344" x="256" y="118.1426">AbstractRepository(app, mongoClient, collectionName)</text><ellipse cx="247" cy="131.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="256" y="135.752">findOne(filter, options)</text><ellipse cx="247" cy="149.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="256" y="153.3613">findMany(filter, projection, options)</text><ellipse cx="247" cy="166.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="256" y="170.9707">findAll()</text><ellipse cx="247" cy="184.3516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="256" y="188.5801">insertOne(item)</text><ellipse cx="247" cy="201.9609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="256" y="206.1895">count(filter)</text><ellipse cx="247" cy="219.5703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="256" y="223.7988">updateOne(query, update, options)</text><ellipse cx="247" cy="237.1797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="256" y="241.4082">deleteOne(filter, options)</text></g><!--MD5=[6344bab90a863195e58d2c48c5b1b83d]
class shExDocRepository--><g id="elem_shExDocRepository"><rect codeLine="19" fill="#F1F1F1" height="65.6094" id="shExDocRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="272" x="285" y="384"/><ellipse cx="354.25" cy="400" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M357.0156,395.875 Q357.1719,395.6563 357.3594,395.5469 Q357.5469,395.4375 357.7656,395.4375 Q358.1406,395.4375 358.375,395.7031 Q358.6094,395.9531 358.6094,396.5625 L358.6094,398.0156 Q358.6094,398.625 358.375,398.8906 Q358.1406,399.1563 357.7656,399.1563 Q357.4219,399.1563 357.2188,398.9531 Q357.0156,398.7656 356.9063,398.25 Q356.8594,397.8906 356.6719,397.7031 Q356.3438,397.3281 355.7344,397.1094 Q355.125,396.8906 354.5,396.8906 Q353.7344,396.8906 353.0938,397.2188 Q352.4688,397.5469 351.9688,398.2969 Q351.4844,399.0469 351.4844,400.0781 L351.4844,401.1719 Q351.4844,402.4063 352.375,403.2344 Q353.2656,404.0469 354.8594,404.0469 Q355.7969,404.0469 356.4531,403.7969 Q356.8438,403.6406 357.2656,403.2031 Q357.5313,402.9375 357.6719,402.8594 Q357.8281,402.7813 358.0313,402.7813 Q358.3594,402.7813 358.6094,403.0469 Q358.875,403.2969 358.875,403.6406 Q358.875,403.9844 358.5313,404.3906 Q358.0313,404.9688 357.2344,405.2969 Q356.1563,405.75 354.8594,405.75 Q353.3438,405.75 352.1406,405.125 Q351.1563,404.625 350.4688,403.5625 Q349.7813,402.4844 349.7813,401.2031 L349.7813,400.0469 Q349.7813,398.7188 350.3906,397.5781 Q351.0156,396.4219 352.1094,395.8125 Q353.2031,395.1875 354.4375,395.1875 Q355.1719,395.1875 355.8125,395.3594 Q356.4688,395.5156 357.0156,395.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="374.75" y="405.7285">ShExDocRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="286" x2="556" y1="416" y2="416"/><line style="stroke:#181818;stroke-width:1.0;" x1="286" x2="556" y1="424" y2="424"/><ellipse cx="296" cy="438.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="246" x="305" y="442.5332">ShExDocRepository(app, mongoClient)</text></g><!--MD5=[32df98a1d85e8bf31f90e96618220639]
class userRepository--><g id="elem_userRepository"><rect codeLine="23" fill="#F1F1F1" height="65.6094" id="userRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="244" x="299" y="283"/><ellipse cx="368.25" cy="299" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M371.0156,294.875 Q371.1719,294.6563 371.3594,294.5469 Q371.5469,294.4375 371.7656,294.4375 Q372.1406,294.4375 372.375,294.7031 Q372.6094,294.9531 372.6094,295.5625 L372.6094,297.0156 Q372.6094,297.625 372.375,297.8906 Q372.1406,298.1563 371.7656,298.1563 Q371.4219,298.1563 371.2188,297.9531 Q371.0156,297.7656 370.9063,297.25 Q370.8594,296.8906 370.6719,296.7031 Q370.3438,296.3281 369.7344,296.1094 Q369.125,295.8906 368.5,295.8906 Q367.7344,295.8906 367.0938,296.2188 Q366.4688,296.5469 365.9688,297.2969 Q365.4844,298.0469 365.4844,299.0781 L365.4844,300.1719 Q365.4844,301.4063 366.375,302.2344 Q367.2656,303.0469 368.8594,303.0469 Q369.7969,303.0469 370.4531,302.7969 Q370.8438,302.6406 371.2656,302.2031 Q371.5313,301.9375 371.6719,301.8594 Q371.8281,301.7813 372.0313,301.7813 Q372.3594,301.7813 372.6094,302.0469 Q372.875,302.2969 372.875,302.6406 Q372.875,302.9844 372.5313,303.3906 Q372.0313,303.9688 371.2344,304.2969 Q370.1563,304.75 368.8594,304.75 Q367.3438,304.75 366.1406,304.125 Q365.1563,303.625 364.4688,302.5625 Q363.7813,301.4844 363.7813,300.2031 L363.7813,299.0469 Q363.7813,297.7188 364.3906,296.5781 Q365.0156,295.4219 366.1094,294.8125 Q367.2031,294.1875 368.4375,294.1875 Q369.1719,294.1875 369.8125,294.3594 Q370.4688,294.5156 371.0156,294.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="388.75" y="304.7285">UserRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="300" x2="542" y1="315" y2="315"/><line style="stroke:#181818;stroke-width:1.0;" x1="300" x2="542" y1="323" y2="323"/><ellipse cx="310" cy="337.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="319" y="341.5332">UserRepository(app, mongoClient)</text></g><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><g id="elem_db"><path d="M666,345 C666,335 711.5,335 711.5,335 C711.5,335 757,335 757,345 L757,389.2188 C757,399.2188 711.5,399.2188 711.5,399.2188 C711.5,399.2188 666,399.2188 666,389.2188 L666,345 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M666,345 C666,355 711.5,355 711.5,355 C711.5,355 757,355 757,345 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="676" y="373.5332">Documents</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="676" y="391.1426">database</text></g><!--MD5=[3efd385673fb5c156d65dfdf8db35554]
link shExDocRepository to abstractRepository--><g id="link_shExDocRepository_abstractRepository"><path codeLine="31" d="M284.97,405.23 C252.72,395.13 222.83,377.8 206,348.5 C186.85,315.16 197.25,283.93 221.57,256.42 " fill="none" id="shExDocRepository-to-abstractRepository" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="216.87,251.21,235.93,241.96,226.8,261.08,216.87,251.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4d1781c8f629341bdd940082bfe0e3a2]
link userRepository to abstractRepository--><g id="link_userRepository_abstractRepository"><path codeLine="32" d="M421,282.94 C421,278.05 421,273.16 421,268.27 " fill="none" id="userRepository-to-abstractRepository" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="414,268.18,421,248.18,428,268.18,414,268.18" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[40e76c6b8e97cc4209d1abb6afac0970]
link persistenceFactory to shExDocRepository--><g id="link_persistenceFactory_shExDocRepository"><path codeLine="34" d="M176.24,378.91 C207.25,383.76 244.11,389.52 279.65,395.07 " fill="none" id="persistenceFactory-to-shExDocRepository" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="284.89,395.89,276.6145,390.55,279.9498,395.119,275.3808,398.4543,284.89,395.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e387f5e485a48ca4b6920a7017fdda71]
link persistenceFactory to userRepository--><g id="link_persistenceFactory_userRepository"><path codeLine="35" d="M176.24,354.85 C211.27,349.27 253.76,342.49 293.39,336.18 " fill="none" id="persistenceFactory-to-userRepository" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="298.71,335.33,289.1936,332.7925,293.772,336.1149,290.4496,340.6933,298.71,335.33" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[52982af8f17a6663ef41c84ea774cd7d]
link shExDocRepository to db--><g id="link_shExDocRepository_db"><path codeLine="37" d="M557.38,393.54 C594.18,387.16 631.75,380.65 660.47,375.67 " fill="none" id="shExDocRepository-to-db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="665.72,374.76,656.1677,372.3612,660.7939,375.6167,657.5385,380.2429,665.72,374.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[18cb9a4ac4191a7ef881a0a1305652c7]
link userRepository to db--><g id="link_userRepository_db"><path codeLine="38" d="M543.1,337.41 C584.37,344.7 628.25,352.46 660.72,358.2 " fill="none" id="userRepository-to-db" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="665.83,359.1,657.6639,353.5941,660.9064,358.2294,656.271,361.4719,665.83,359.1" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d3724b04404d4087f6effc27563682c6]
@startuml ShareYASHE - Classes structure - Persistence layer
left to right direction

package "Persistence layer" as persistenceLayer {
    class "PersistenceFactory" as persistenceFactory {
    }
    abstract class "AbstractRepository" as abstractRepository {
        {static}-clientDB = 'local'
        - -
        +AbstractRepository(app, mongoClient, collectionName)
        +findOne(filter, options)
        +findMany(filter, projection, options)
        +findAll()
        +insertOne(item)
        +count(filter)
        +updateOne(query, update, options)
        +deleteOne(filter, options)
    }

    class "ShExDocRepository" as shExDocRepository {
        - -
        +ShExDocRepository(app, mongoClient)
    }
    class "UserRepository" as userRepository {
        - -
        +UserRepository(app, mongoClient)
    }
}
database "Documents\ndatabase" as db {
}

shExDocRepository -right-|> abstractRepository
userRepository -right-|> abstractRepository

persistenceFactory - -> shExDocRepository
persistenceFactory - -> userRepository

shExDocRepository - -> db
userRepository - -> db

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: es
Country: ES
--></g></svg>